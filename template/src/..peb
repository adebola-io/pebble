## An array-based implementation of a stack.
@public @struct Stack<T> {
   _arr: Array<T> = [];
   @public readonly size = 0;
   @public readonly isEmpty = true;
}

@utilize Stack<T> {
   ## Pushes a piece of data onto the top of the stack.
   @public push(data: T) {
      self.size++;
      self._arr.push(data);
      self.isEmpty = self.isEmpty && false;
   }
   ## Removes the data on the top of the stack and returns it.
   @public pop() => T {
      if (self.isEmpty) {
         crash new core.Error("Cannot pop from an empty stack.");
      } else {
         self.size--;
         self.isEmpty = self.size == 0;
         return self._arr.pop();
      }
   }
   ## Peeks at the data on the top of the stack without removing it.
   @public top() => &T {
      if (self.isEmpty) {
         crash new core.Error("Cannot read the top of an empty stack.");
      } else {
         return self._arr.last()
      }
   }
}

@set stack: Stack<Number> = new Stack();  
stack.push(1);
stack.push(9);
stack.pop();
println stack.pop(); // Prints out 1.
